'\" t
.\" Copyright (c) 2003 Gunnar Ritter
.\"
.\" This software is provided 'as-is', without any express or implied
.\" warranty. In no event will the authors be held liable for any damages
.\" arising from the use of this software.
.\"
.\" Permission is granted to anyone to use this software for any purpose,
.\" including commercial applications, and to alter it and redistribute
.\" it freely, subject to the following restrictions:
.\"
.\" 1. The origin of this software must not be misrepresented; you must not
.\"    claim that you wrote the original software. If you use this software
.\"    in a product, an acknowledgment in the product documentation would be
.\"    appreciated but is not required.
.\"
.\" 2. Altered source versions must be plainly marked as such, and must not be
.\"    misrepresented as being the original software.
.\"
.\" 3. This notice may not be removed or altered from any source distribution.
.\"
.\" Sccsid @(#)intro.1.in	1.17 (gritter) 12/8/04
.TH INTRO 1 "12/8/04" "Heirloom Toolchest" "User Commands"
.SH NAME
intro \- introduction to commands
.SH DESCRIPTION
The
.I Heirloom Toolchest
is a collection of standard Unix utilities
that is intended to provide maximum compatibility with traditional Unix
while incorporating additional features necessary today.
To achieve this,
utilities are derived from original Unix sources
if permitted by its licenses.
This means that material from Unix 6th Edition,
Unix 7th Edition, and Unix 32V was used,
since these systems were put under an Open Source license
by Caldera in January 2002.
In addition, 4BSD source
(governed by the University's copyright and partially
derived from 32V) has been used.
(Other sources were Caldera's `Open Source Unix[tm] Tools',
the MINIX utility collection,
Plan 9,
and Info-ZIP's compression codes.)
If no freely available Unix sources were available
(for example, for tools introduced in System III or System V),
utilities were rewritten from scratch.
(The exact license terms are provided in a separate document.)
.PP
The tools in this collection are oriented
on the specifications or systems named below.
Since there are some incompatibilities between them,
some tools are present in more than one version.
.IP \(en
System V Interface Definition, Third Edition
(UNIX System Laboratories, 1992) (SVID3).
This specification corresponds to a System V Release 4
or Solaris 2 system.
Utilities in
.B /usr/5bin
are modeled after this specification and related system environments.
If extensions introduced in POSIX.2 (see below)
did not provoke conflicts with the behavior at this level,
they were incorporated in these utilities as well.
This is the most traditional personality
available with the
.IR "Heirloom Toolchest" ;
prominently,
regular expressions do not have any of the internationalization features
(see
.IR ed (1)
and
.IR egrep (1)),
and
.I awk
is the old version,
.IR oawk (1).
Use this personality to get best compatibility
with traditional System V behavior.
.IP \(en
System V Interface Definition, Fourth Edition
(Novell, Inc., 1995) (SVID4).
This specification corresponds to a System V Release 4.2 MP system.
Utilities in
.B /usr/5bin/s42
are modeled after this specification and related system environments.
If extensions introduced in POSIX.2 (see below)
did not provoke conflicts with the behavior at this level,
they were incorporated in these utilities as well.
The most essential difference between this and the SVID3 personality
are internationalized regular expressions
and the choice of the new awk,
.IR nawk (1),
for
.IR awk .
Use this personality to get traditional System V behavior
combined with internationalized regular expressions.
.IP \(en
ISO/IEC 9945-2:1993 / ANSI/IEEE Std 1003.2-1992 (POSIX.2),
with the extensions of
The Single UNIX Specification, Version 2 (The Open Group, 1997).
Utilities in
.B /usr/5bin/posix
are intended to fully comply to this specification
even in cases of conflict with historical behavior.
Non-conflicting extensions to POSIX.2
found in the environments described above
are also present in these utilities.
Use this personality if you need POSIX.2 features
in preference to traditional System V ones.
.PP
To use the
.IR "Heirloom Toolchest" ,
select one of these personalities
and put the corresponding directory
at the beginning of the PATH environment variable,
immediately followed by the toolchest base directory,
.B @.DEFBIN.@
(which contains the tools that are the same for all personalities).
For example, to use the toolchest with a SVID4 personality, execute
.RS
.sp
PATH=/usr/5bin/s42:@.DEFBIN.@:$PATH export PATH
.RE
.PP
You must select exactly one of the personalities above;
you do not have access to the complete set of tools otherwise.
.PP
The manual pages generally note
which behavior corresponds to which utility version.
They also mark whether options and arguments
were part of System V,
were introduced with POSIX.2,
or if they are extensions provided by the Heirloom Toolchest,
(possibly oriented at extensions introduced by other vendors).
Such extensions are subject to change without a grace period;
they are only intended for interactive usage
and should not be included in scripts.
.PP
The toolchest also includes some utilities
modeled after the BSD Compatibility environment
of System V;
these roughly correspond to 4.3BSD or SunOS 4 systems.
These tools can be found in
.BR /usr/ucb ;
since they do not form a full personality set
as the ones described above,
they should be used in addition, as e.\|g.
.RS
.sp
PATH=/usr/ucb:/usr/5bin/s42:@.DEFBIN.@:$PATH export PATH
.sp
.RE
does.
.PP
While the
.I Heirloom Toolchest
is intended to be as compatible as possible
with historical practice in general,
annoying static limits of historical implementations
are not present any longer.
Input lines of unlimited length are generally accepted
(as long as enough memory is available);
most utilities are also able to handle binary input data
(i.\|e. ASCII NUL characters in the input stream).
.SS "Multibyte character sets"
The
.I Heirloom Toolchest
includes support for multibyte character sets;
if the system's C library supports this
and the
.I LC_CTYPE
locale
(see
.IR locale (7)
for an introduction)
is set appropriately,
multiple input bytes can form a single character
and are handled as such in regular expressions,
display width computations etc.
.PP
Multibyte character support
was designed with special regard to the UTF-8 encoding.
Other encodings may also work,
with the following restrictions:
.IP \(en 2
The first byte of each multibyte character
must have the highest bit set,
i.\|e. it must not be an ASCII character.
.IP \(en 2
All ASCII characters must be represented
as a single byte with the same value as the ASCII character.
In addition,
the C language implementation
must map each ASCII character
to a wide character with the same value.
.IP \(en 2
Locking-shift encodings are not supported.
.PP
Processing of multibyte character encodings
is notably slower than that of singlebyte character encodings.
Since many widely-used languages
(especially European ones based on Latin letters)
contain few multibyte characters if encoded in UTF-8,
and since experience shows that large amounts of textual data
tend to be machine generated and to contain mostly ASCII characters
(e.\|g. log files),
while international language texts
are mostly created by humans and tend to be much smaller,
processing of multibyte characters
has generally been optimized
for ASCII text, even in multibyte locales.
.PP
A problem with multibyte encodings
that does not normally occur in singlebyte encodings
is that of illegal byte sequences.
In a singlebyte locale,
each byte is treated as a character entity
even if its value is not mapped to a character.
For example, characters with the highest bit set
are simply passed through in the default `C' or `POSIX' locale,
and can appear in option arguments as well as in input data.
In multibyte locales however,
byte sequences that do not form a valid character
cannot be handled this way,
because it is not clear which bytes are to be grouped together.
For example, suppose that the `\e200' character
introduces a multibyte sequence
but cannot appear as its second or following byte.
If a sequence of four such characters `\e200\e200\e200\e200' is found
in a string to be matched in the input processed by a utility,
it is unclear whether it should match a sequence of six such characters.
For this reason,
this implementation generally treats illegal byte sequences
in command line arguments or programming scripts
as syntax errors.
It does not issue a warning if such sequences
appear in input data, however,
since experience shows this to happen quite often,
and a utility unable to process such input
would be of little practical value.
.PP
As singlebyte character encodings
are processed faster and less error-prone,
it is recommended that such encodings are used
wherever possible.
While UTF-8 is a good encoding for data exchange,
mixed-language texts or texts that contain special glyphs,
most texts in European languages can be represented
in a singlebyte encoding,
e.\|g. one of the ISO-8859 family.
Doing so for storage and processing on a Unix system
and converting to UTF-8 for transfer only
will be the best method in many cases.
