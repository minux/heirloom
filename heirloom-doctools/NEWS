New features in the Heirloom Documentation Tools troff language
===============================================================

With the "-x" option, new features become available by the names as
shown. Without the "-x" option, long requests can be invoked with
the ".do" prefix as described below; other features are available by
default since they should not normally create compatibility problems.
With the "-X" option, all extensions except for locale-dependent input
are disabled.

.chop name
	removes the last character of the macro, string, or diversion
	"name".

.de longname
.ds longname
.nr longname
	The names of macros, strings, and number registers can be longer
	than two characters now with the "-x" option.

.do request arguments
	has the same effect as executing ".request arguments" with the
	"-x" option enabled, even if that was not given on the command
	line.  Thus ".do papersize a4" works like ".papersize a4",
	".do de longname" defines a macro with a long name, and
	".do longname" executes it. It is possible to contract extended
	request names without the "-x" option, such as ".dopapersize",
	although such usage seems questionable.

.ev name
	Environments can be named, or be given an arbitrary number.

.evc name
	copies the environment "name" into the current environment.
	The temporary state of the current environment is reset, and
	incompletely filled lines are discarded.

.fallback ff aa bb ...					troff only
	selects the fallback sequence for font ff. If the current font
	is ff and a character is not found, font aa is searched first,
	then font bb, etc. If the character still has not been found,
	it is searched for in font S, then in font 0, 1, and so forth.

.flig ff ligatures					troff only
	defines the set of ligatures to be used with font ff. The
	"ligatures" parameter is the sum of the values 1 for ff, 2 for
	fi, 4 for fl, 8 for ffi, and 16 for ffl. Thus ".flig R 31"
	enables all these ligatures in font R. The default is specific
	to a font and is determined from its AFM file. Enabling the ff,
	ffi, and ffl ligatures with PostScript fonts usually requires
	an expert font that has been selected for character substitution
	using the ".fallback" request.

.fpost r yy afmname [supplyname]			troff only
	reads metrics from "afmname". If the TROFFONTS environment variable
	is set, each of the colon-separated directories in it is tried for
	the file "afmname.afm", or, if "afmname" has the ".afm" extension
	itself, for "afmname". Otherwise, the font is loaded from the file
	"/usr/ucblib/doctools/font/dev7200/afm/afmname.afm".
	  The font is then available with ".ft yy", "\f(yy", etc. "yy" may
	be freely chosen. The "r" argument specifies a register on which
	the font is to be mounted. If it is zero, the font is mounted on
	a free position (not on position zero). Contrasting to the ".fp"
	request, the "r" argument may consist of more than a single digit.
	  "yy" may be the name of an existing ditroff-style font, such
	as "R". In this case, the same register must be reused. For best
	compatibility with conventional troff usage, it is recommended
	that the base fonts of a document are mounted as "1 R", "2 I".
	The initial fonts on positions 9 (S1) and 10 (S) should not be
	changed, as these contain special metrics for drawing commands.
	  If the optional "supplyname" argument is present, glyph data
	is included in the generated PostScript file. If "supplyname"
	is one of "pfb", "pfa", or "t42", the file "supplyname.pfb" (or
	likewise) is searched in the directories in TROFFONTS first as
	described for the AFM file above, and if it is not found there,
	in "/usr/ucblib/doctools/font/dev7200/pfb/supplyname.pfb" (or
	likewise). "supplyname" may also be the basename of a file like
	"afmname" above.

.fzoom ff z						troff only
	zooms font ff by "z", where "z" is a positive floating-point
	number. This request is useful for adjusting fonts with different
	visual sizes but identical nominal points; the zoom is thus not
	applied to characters from another font that have been found by
	the fallback sequence.

.hidechar ff c d ...					troff only
	hides the characters c, d, etc. from font ff. If the characters
	appear in input afterwards, they are searched in other fonts
	using the fallback sequence. This is useful e.g. for combining
	characters from a regular and an expert font.

.hylang language
	Sets the hyphenation language to "language", where language
	is one of de_DE, de_DE@traditional, en_US, fr_FR, it_IT, or
	la_VA. Other languages can be made available by adding hyphenation
	files to the directory /usr/ucblib/doctools/hyphen; see the notes
	in "troff/libhnj/hyphen.d" for details. If no "language" argument
	is present, the hyphenation is reset to the traditional troff
	mechanism. Note that hyphenation is disabled by default if troff
	is used directly, and can be switched on using the ".hy" request,
	which is what many macro packages do.

.kern [0|1]						troff only
	Disables (0) or enables pairwise kerning. The default is enabled
	unless the "-X" option is given.

.lc_ctype localename
	sets the LC_CTYPE locale setting to localename. The default is
	the value of the LC_CTYPE environment variable. This request is
	useful to specify an input character set regardless of environment
	influences.

.papersize executive|letter|legal|leger|tabloid|aN|bN|cN|x y	troff only
	sets the paper size to the given format, which may be either one
	of the predefined American or international formats (such as a4),
	or a user-defined format "x y". The page length is set from these
	parameters, the page offset and line length are adjusted as needed,
	and the postprocessor is instructed to generate appropriate device
	setup commands. The last action is the real reason why this request
	exists; without it, PostScript printers may displace the pages of
	the document. The default are "letter" measurements but no device
	setup commands. This request should be used early in a document;
	if it is given multiple times, the last one will setup the device.

.return
	immediately returns from the current macro to the level above.

.ss n m							troff only
	with the second argument "m" determines whether additional white
	space is added between sentences. If m is zero, no additional
	white space is added. Otherwise, a space of size n is added as
	usual.

.track ff s1 n1 s2 n2					troff only
	specifies tracking of letter space for font ff. If the current font
	is ff and the point size is below or equal to s1, white space of
	width n1 is added to each character. If the point size is above or
	equal to s2, white space of width n2 is added. If the point size
	is between s1 and s2, the amount of white space added is computed
	as a value between n1 and n2 using the current point size s:
	(s * n2 - s * n1 + s2 * n1 - s1 * n2) / (s2 - s1). The default unit
	for all numeric arguments is "p". Negative numbers are accepted and
	cause a decrease of letter space. No adjustment is performed on the
	last character of an output line. Tracking also applies to characters
	from another font that have been selected by the fallback sequence.

\$*
	prints all arguments to a macro, separated by spaces.

\$@
	prints all arguments to a macro, each one surrounded by double
	quotes, separated by spaces.

\*[name]
	refers to the string "name".

\:
	is similar to "\%", but only inserts an optional line break and
	does not cause a hyphen to be printed if the line is split.

\[name]							troff only
	selects the character "name" as defined in the AFM file for the
	current font. The file "stuff/showfont.sh" can be used to display
	the characters in a PostScript font along with their names.

\E
	is similar to "\e", but is not interpreted in copy mode.

\n[name]
	refers to the number register "name".

\~
	is similar to "\ ", but inserts space that stretches when the
	line is adjusted like a regular " ".

any character in the current LC_CTYPE locale
	In nroff, any printable character is just passed through.
	In troff, the character is converted to a PostScript character
	name. If it is found in the current font, it is printed.
	Otherwise, the .fallback sequence is searched for it. This
	mechanism only works with fonts mounted by the .fpost request.

\X'Sync'						troff only
	forces dpost to write position and font information to the
	generated PostScript exactly at the place where this escape
	sequence occurs. This is sometimes useful to ensure that
	following "\X'PS: ...'" commands work as expected.

Gunnar Ritter                                                   9/2/05
