%%BeginResource: procset dpost_cutmarks 1.8 0
%
% Copyright 2005 Gunnar Ritter, Freiburg i. Br., Germany. All rights reserved.
% Use is subject to license terms.
%
% CDDL HEADER START
%
% The contents of this file are subject to the terms of the
% Common Development and Distribution License, Version 1.0 only
% (the "License").  You may not use this file except in compliance
% with the License.
%
% You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
% or http://www.opensolaris.org/os/licensing.
% See the License for the specific language governing permissions
% and limitations under the License.
%
% When distributing Covered Code, include this CDDL HEADER in each
% file and include the License file at usr/src/OPENSOLARIS.LICENSE.
% If applicable, add the following below this CDDL HEADER, with the
% fields enclosed by brackets "[]" replaced with your own identifying
% information: Portions Copyright [yyyy] [name of copyright owner]
%
% CDDL HEADER END
%
% Sccsid @(#)cutmarks.ps	1.8 (gritter) 12/22/05
%

/_cutmark_a 10 def
/_cutmark_b 30 def

/_cutmark_adj {scaling div} def
/_cutmark_yadj {pagebbox 3 get exch sub} def
/_cutmark_tbx {_TrimBox exch get _cutmark_adj} def
/_cutmark_tby {_TrimBox exch get _cutmark_yadj _cutmark_adj neg} def
/_cutmark {
	_cutmark_tbx exch _cutmark_adj sub 3 1 roll
	_cutmark_tby exch _cutmark_adj sub moveto
	_cutmark_tbx exch _cutmark_adj sub 3 1 roll
	_cutmark_tby exch _cutmark_adj sub lineto
} def
/_regmark {
	/_regmark_d exch def
	/_regmark_y exch def
	/_regmark_x exch def
	/_regmark_r _regmark_d 2 div def
	_regmark_x _regmark_r add _regmark_y moveto
	_regmark_x _regmark_y _regmark_r 0 360 arc
	_regmark_x _regmark_d sub _regmark_y moveto
	_regmark_x _regmark_d add _regmark_y lineto
	_regmark_x _regmark_y _regmark_d sub moveto
	_regmark_x _regmark_y _regmark_d add lineto
} def

/setseparationgray where {
	% Cf. Adobe Technical Note #5044, "Color Separation Conventions
	% for PostScript Language Programs", 5/24/96, p. 27
	pop
} {
	languagelevel 2 lt {
		/setseparationgray {
			1 exch sub dup dup dup setcmykcolor
		} def
	} {
		/setseparationgray {
			[/Separation /All /DeviceCMYK {dup dup dup}] setcolorspace
			1 exch sub setcolor
		} def
	} ifelse
} ifelse
/_cutmark_setup {
	0 setseparationgray
	linewidth _cutmark_adj setlinewidth
} def

/_cutmarks {
	/_TrimBox where {
		pop
		gsave
		_cutmark_setup
		newpath
		0 1 _cutmark_a 0 0 1 _cutmark_b 0 _cutmark
		_cutmark_a 1 0 0 _cutmark_b 1 0 0 _cutmark
		0 3 _cutmark_a 0 0 3 _cutmark_b 0 _cutmark
		_cutmark_a neg 3 0 0 _cutmark_b neg 3 0 0 _cutmark
		0 3 _cutmark_a neg 2 0 3 _cutmark_b neg 2 _cutmark
		_cutmark_a neg 3 0 2 _cutmark_b neg 3 0 2 _cutmark
		0 1 _cutmark_a neg 2 0 1 _cutmark_b neg 2 _cutmark
		_cutmark_a 1 0 2 _cutmark_b 1 0 2 _cutmark
		stroke
		grestore
	} if
} def

/_regmarks {
	/_TrimBox where {
		pop
		gsave
		_cutmark_setup
		newpath
		/_cutmark_d _cutmark_b _cutmark_a sub 2 div _cutmark_adj def
		0 _cutmark_tbx _cutmark_d sub _cutmark_a _cutmark_adj sub
			1 _cutmark_tby 3 _cutmark_tby 1 _cutmark_tby sub
				2 div add
			_cutmark_d _regmark
		2 _cutmark_tbx _cutmark_d add _cutmark_a _cutmark_adj add
			1 _cutmark_tby 3 _cutmark_tby 1 _cutmark_tby sub
				2 div add
			_cutmark_d _regmark
		0 _cutmark_tbx 2 _cutmark_tbx 0 _cutmark_tbx sub 2 div add
			1 _cutmark_tby _cutmark_d sub
				_cutmark_a _cutmark_adj sub
			_cutmark_d _regmark
		0 _cutmark_tbx 2 _cutmark_tbx 0 _cutmark_tbx sub 2 div add
			3 _cutmark_tby _cutmark_d add
				_cutmark_a _cutmark_adj add
			_cutmark_d _regmark
		stroke
		grestore
	} if
} def
%%EndResource
